<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic AI Assistant</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Markdown styling */
        .markdown-content {
            line-height: 1.6;
        }
        .markdown-content h1 {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 1em;
            margin-bottom: 0.5em;
            color: #1f2937;
        }
        .markdown-content h2 {
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 0.8em;
            margin-bottom: 0.4em;
            color: #374151;
        }
        .markdown-content h3 {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 0.6em;
            margin-bottom: 0.3em;
            color: #4b5563;
        }
        .markdown-content p {
            margin-bottom: 1em;
        }
        .markdown-content ul, .markdown-content ol {
            margin-left: 1.5em;
            margin-bottom: 1em;
        }
        .markdown-content li {
            margin-bottom: 0.5em;
        }
        .markdown-content code {
            background-color: #f3f4f6;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #dc2626;
        }
        .markdown-content pre {
            background-color: #1f2937;
            color: #f9fafb;
            padding: 1em;
            border-radius: 0.5em;
            overflow-x: auto;
            margin-bottom: 1em;
        }
        .markdown-content pre code {
            background-color: transparent;
            padding: 0;
            color: #f9fafb;
        }
        .markdown-content blockquote {
            border-left: 4px solid #e5e7eb;
            padding-left: 1em;
            margin-left: 0;
            margin-bottom: 1em;
            color: #6b7280;
            font-style: italic;
        }
        .markdown-content strong {
            font-weight: 600;
            color: #111827;
        }
        .markdown-content em {
            font-style: italic;
        }
        .markdown-content a {
            color: #2563eb;
            text-decoration: underline;
        }
        .markdown-content a:hover {
            color: #1d4ed8;
        }
        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1em;
        }
        .markdown-content th, .markdown-content td {
            border: 1px solid #e5e7eb;
            padding: 0.5em;
            text-align: left;
        }
        .markdown-content th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        .markdown-content hr {
            border: 0;
            border-top: 2px solid #e5e7eb;
            margin: 1.5em 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        function AgenticAIApp() {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [agentStatus, setAgentStatus] = useState('');
            const [apiKey, setApiKey] = useState('');
            const [showApiInput, setShowApiInput] = useState(true);
            const [selectedModel, setSelectedModel] = useState('llama-3.3-70b-versatile');
            const [useTools, setUseTools] = useState(false);
            const [showGuide, setShowGuide] = useState(true);
            const messagesEndRef = useRef(null);

            // Available Groq models
            const availableModels = [
                { id: 'llama-3.3-70b-versatile', name: 'Llama 3.3 70B', description: 'Most capable, best for complex tasks' },
                { id: 'llama-3.1-8b-instant', name: 'Llama 3.1 8B', description: 'Fast and efficient' },
                { id: 'mixtral-8x7b-32768', name: 'Mixtral 8x7B', description: 'Good balance of speed and capability' },
                { id: 'gemma2-9b-it', name: 'Gemma 2 9B', description: 'Google model, good performance' }
            ];

            // Configure marked for better rendering
            if (typeof marked !== 'undefined') {
                marked.setOptions({
                    breaks: true,
                    gfm: true,
                    headerIds: false,
                    mangle: false
                });
            }

            // Render markdown content
            const renderMarkdown = (content) => {
                if (typeof marked === 'undefined') {
                    return content;
                }
                return marked.parse(content);
            };

            // Component for rendering formatted message
            const FormattedMessage = ({ content }) => {
                return (
                    <div 
                        className="markdown-content"
                        dangerouslySetInnerHTML={{ __html: renderMarkdown(content) }}
                    />
                );
            };

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const addMessage = (role, content, type = 'text') => {
                setMessages(prev => [...prev, { role, content, type, timestamp: new Date() }]);
            };

            const callGroqAPI = async (conversationHistory, tools = []) => {
                if (!apiKey) {
                    throw new Error('Please enter your Groq API key');
                }

                try {
                    const payload = {
                        model: selectedModel,
                        messages: conversationHistory,
                        temperature: 0.5,
                        max_tokens: 2048
                    };

                    // Only add tools if we have them
                    if (tools.length > 0) {
                        payload.tools = tools;
                        payload.tool_choice = "auto";
                    }

                    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(errorData.error?.message || `API error: ${response.status}`);
                    }

                    return await response.json();
                } catch (error) {
                    console.error("Groq API call failed:", error);
                    throw error;
                }
            };

            // Define available tools for the agent - simplified for Groq compatibility
            const availableTools = [
                {
                    type: "function",
                    function: {
                        name: "search_web",
                        description: "Search the web for current information. Use when user asks about recent events, news, or needs up-to-date information.",
                        parameters: {
                            type: "object",
                            properties: {
                                query: {
                                    type: "string",
                                    description: "The search query"
                                }
                            },
                            required: ["query"]
                        }
                    }
                },
                {
                    type: "function",
                    function: {
                        name: "analyze_data",
                        description: "Analyze data or perform comparisons. Use when user wants to compare things or needs analysis.",
                        parameters: {
                            type: "object",
                            properties: {
                                topic: {
                                    type: "string",
                                    description: "What to analyze or compare"
                                }
                            },
                            required: ["topic"]
                        }
                    }
                }
            ];

            // Tool execution functions
            const executeSearchWeb = async (query) => {
                setAgentStatus(`üîç Searching: ${query}`);
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Provide contextual responses based on query keywords
                const lowerQuery = query.toLowerCase();
                
                if (lowerQuery.includes('agent')) {
                    return `Search results: AI agents are autonomous systems that can perceive, reason, and act. Recent developments show agents using tools like function calling, web search, and code execution. Key applications include customer service automation, data analysis assistants, and software development copilots. The field is rapidly evolving with frameworks like LangChain, AutoGPT, and tool-augmented LLMs.`;
                } else if (lowerQuery.includes('groq')) {
                    return `Search results: Groq provides ultra-fast LLM inference using their custom LPU (Language Processing Unit) architecture. They offer API access to models like Llama 3.3 70B, achieving significantly lower latency than traditional GPU inference. Popular for real-time applications and agentic systems.`;
                } else if (lowerQuery.includes('fabric')) {
                    return `Search results: Microsoft Fabric is a unified analytics platform combining data integration, engineering, warehousing, science, and business intelligence. Recent updates include enhanced AI features, improved Spark runtime, OneLake integration, and better Power BI connectivity.`;
                } else {
                    return `Search results for "${query}": Found comprehensive information including recent updates, technical details, use cases, and industry trends. The topic shows active development with growing adoption across enterprises.`;
                }
            };

            const executeAnalyzeData = async (topic) => {
                setAgentStatus(`üìä Analyzing: ${topic}`);
                await new Promise(resolve => setTimeout(resolve, 800));
                
                const lowerTopic = topic.toLowerCase();
                
                if (lowerTopic.includes('agent')) {
                    return `Analysis complete: AI agents represent a paradigm shift from simple chatbots to autonomous systems. Key differentiators include: (1) Goal-directed behavior, (2) Tool usage capabilities, (3) Multi-step reasoning, (4) Environment interaction. The technology enables new use cases in automation, research, and decision support.`;
                } else {
                    return `Analysis of "${topic}": Comprehensive evaluation reveals multiple dimensions including technical capabilities, practical applications, market adoption, and future potential. Key findings suggest strong growth trajectory with increasing enterprise integration.`;
                }
            };

            // Execute tool calls
            const executeTool = async (toolCall) => {
                const { name, arguments: args } = toolCall.function;
                let parsedArgs;
                
                try {
                    parsedArgs = JSON.parse(args);
                } catch (e) {
                    console.error("Failed to parse tool arguments:", args);
                    parsedArgs = { query: args }; // Fallback
                }
                
                addMessage('system', `üîß Using tool: ${name}`, 'tool');
                
                let result;
                try {
                    switch (name) {
                        case 'search_web':
                            result = await executeSearchWeb(parsedArgs.query || parsedArgs.topic);
                            break;
                        case 'analyze_data':
                            result = await executeAnalyzeData(parsedArgs.topic || parsedArgs.query);
                            break;
                        default:
                            result = "Tool executed successfully";
                    }
                    
                    addMessage('system', `‚úÖ Result: ${result.substring(0, 150)}...`, 'tool');
                } catch (error) {
                    result = `Tool execution error: ${error.message}`;
                    addMessage('system', `‚ö†Ô∏è ${result}`, 'tool');
                }
                
                return {
                    tool_call_id: toolCall.id,
                    role: "tool",
                    name: name,
                    content: result
                };
            };

            const processAgentResponse = async (userMessage) => {
                setIsProcessing(true);
                
                try {
                    // Build conversation history
                    let conversationHistory = [
                        {
                            role: "system",
                            content: useTools 
                                ? "You are a helpful AI assistant with access to tools. When you use tools, the tool results will contain the information you need. After using a tool once, provide a complete formatted answer. Do not call tools repeatedly."
                                : "You are a helpful AI assistant. Provide clear, well-formatted answers using markdown. Use headers, lists, code blocks, and emphasis to make your responses easy to read."
                        },
                        ...messages
                            .filter(m => (m.role === 'user' || m.role === 'assistant') && m.type === 'text')
                            .map(m => ({ role: m.role, content: m.content })),
                        { role: "user", content: userMessage }
                    ];

                    // If tools are disabled, just get a direct response
                    if (!useTools) {
                        setAgentStatus('ü§î Thinking...');
                        const response = await callGroqAPI(conversationHistory, []);
                        
                        if (!response.choices || !response.choices[0]) {
                            throw new Error('Invalid response from Groq API');
                        }
                        
                        const message = response.choices[0].message;
                        if (message.content) {
                            addMessage('assistant', message.content);
                        }
                        setAgentStatus('');
                        setIsProcessing(false);
                        return;
                    }

                    // Tool-enabled mode
                    let continueLoop = true;
                    let iterationCount = 0;
                    const maxIterations = 3;

                    while (continueLoop && iterationCount < maxIterations) {
                        iterationCount++;
                        
                        setAgentStatus('ü§î Thinking...');
                        
                        // Call Groq API with tools
                        const response = await callGroqAPI(conversationHistory, availableTools);
                        
                        if (!response.choices || !response.choices[0]) {
                            throw new Error('Invalid response from Groq API');
                        }
                        
                        const message = response.choices[0].message;

                        // Check if agent wants to use tools
                        if (message.tool_calls && message.tool_calls.length > 0) {
                            conversationHistory.push({
                                role: "assistant",
                                content: message.content || "",
                                tool_calls: message.tool_calls
                            });
                            
                            for (const toolCall of message.tool_calls) {
                                const toolResult = await executeTool(toolCall);
                                conversationHistory.push(toolResult);
                            }
                            
                            if (iterationCount === 1) {
                                conversationHistory.push({
                                    role: "system",
                                    content: "You have the tool results. Now provide a complete, well-formatted answer. Do not call more tools."
                                });
                            }
                            continue;
                        } else {
                            if (message.content) {
                                addMessage('assistant', message.content);
                            } else {
                                addMessage('assistant', 'I processed your request.');
                            }
                            continueLoop = false;
                        }
                    }

                    if (iterationCount >= maxIterations) {
                        addMessage('assistant', 'Based on the available information, I can provide you with a comprehensive answer. Please try asking your question in a different way for the best results.');
                    }

                    setAgentStatus('');
                } catch (error) {
                    console.error('Error details:', error);
                    
                    // Provide a helpful fallback response
                    if (error.message.includes('Failed to call a function')) {
                        addMessage('system', '‚ö†Ô∏è Function calling error detected. Switching to direct mode...', 'tool');
                        
                        // Retry without tools
                        try {
                            const fallbackHistory = [
                                {
                                    role: "system",
                                    content: "You are a helpful AI assistant. Provide clear, well-formatted answers using markdown."
                                },
                                { role: "user", content: messages[messages.length - 1]?.content || "Please help me." }
                            ];
                            
                            const response = await callGroqAPI(fallbackHistory, []);
                            if (response.choices?.[0]?.message?.content) {
                                addMessage('assistant', response.choices[0].message.content);
                            }
                        } catch (fallbackError) {
                            addMessage('system', `‚ùå Error: ${error.message}. Try disabling tools in settings.`, 'error');
                        }
                    } else {
                        addMessage('system', `‚ùå Error: ${error.message}`, 'error');
                    }
                    setAgentStatus('');
                } finally {
                    setIsProcessing(false);
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!input.trim() || isProcessing) return;

                const userMessage = input.trim();
                setInput('');
                addMessage('user', userMessage);
                
                await processAgentResponse(userMessage);
            };

            const clearChat = () => {
                setMessages([]);
                setAgentStatus('');
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-4xl mx-auto">
                        {/* Header */}
                        <div className="bg-white rounded-t-2xl shadow-lg p-6 border-b border-gray-200">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-3">
                                    <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                                        <span className="text-white text-2xl">‚ö°</span>
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-800">Groq Agentic AI</h1>
                                        <p className="text-sm text-gray-500">
                                            {availableModels.find(m => m.id === selectedModel)?.name || 'AI Agent'} with tool calling
                                        </p>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-3">
                                    {apiKey && (
                                        <div className="flex items-center space-x-2 px-3 py-1 bg-green-50 rounded-lg">
                                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                                            <span className="text-sm text-green-700 font-medium">Connected</span>
                                        </div>
                                    )}
                                    <button
                                        onClick={() => setShowGuide(true)}
                                        className="px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors"
                                    >
                                        üìñ Guide
                                    </button>
                                    <button
                                        onClick={() => setShowApiInput(!showApiInput)}
                                        className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors"
                                    >
                                        {showApiInput ? 'Hide' : 'Settings'}
                                    </button>
                                    <button
                                        onClick={clearChat}
                                        className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors"
                                    >
                                        Clear Chat
                                    </button>
                                </div>
                            </div>
                            
                            {/* API Key Input & Model Selection */}
                            {showApiInput && (
                                <div className="mt-4 space-y-4">
                                    {/* API Key */}
                                    <div className="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Groq API Key
                                            <a 
                                                href="https://console.groq.com/keys" 
                                                target="_blank" 
                                                rel="noopener noreferrer"
                                                className="ml-2 text-blue-600 hover:text-blue-700 text-xs"
                                            >
                                                (Free tier available with usage limits)
                                            </a>
                                        </label>
                                        <input
                                            type="password"
                                            value={apiKey}
                                            onChange={(e) => setApiKey(e.target.value)}
                                            placeholder="gsk_..."
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <p className="mt-2 text-xs text-gray-600">
                                            Your API key is stored locally and only sent to Groq's API.
                                        </p>
                                    </div>
                                    
                                    {/* Model Selection */}
                                    <div className="p-4 bg-purple-50 rounded-lg border border-purple-200">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Select Model
                                        </label>
                                        <select
                                            value={selectedModel}
                                            onChange={(e) => setSelectedModel(e.target.value)}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white"
                                        >
                                            {availableModels.map(model => (
                                                <option key={model.id} value={model.id}>
                                                    {model.name} - {model.description}
                                                </option>
                                            ))}
                                        </select>
                                        <p className="mt-2 text-xs text-gray-600">
                                            Choose based on your needs: capability vs speed
                                        </p>
                                    </div>
                                    
                                    {/* Tool Calling Toggle */}
                                    <div className="p-4 bg-green-50 rounded-lg border border-green-200">
                                        <div className="flex items-center justify-between">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700">
                                                    Enable Tool Calling (Experimental)
                                                </label>
                                                <p className="text-xs text-gray-600 mt-1">
                                                    Allow agent to use search_web and analyze_data tools
                                                </p>
                                            </div>
                                            <button
                                                onClick={() => setUseTools(!useTools)}
                                                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                                                    useTools ? 'bg-green-600' : 'bg-gray-300'
                                                }`}
                                            >
                                                <span
                                                    className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                                                        useTools ? 'translate-x-6' : 'translate-x-1'
                                                    }`}
                                                />
                                            </button>
                                        </div>
                                        {useTools && (
                                            <div className="mt-2 text-xs text-amber-700 bg-amber-50 p-2 rounded border border-amber-200">
                                                ‚ö†Ô∏è Note: Some models may not support function calling well. Disable if you see errors.
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Agent Status */}
                        {agentStatus && (
                            <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                                <div className="flex items-center space-x-2">
                                    <div className="animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"></div>
                                    <span className="text-blue-700 font-medium">{agentStatus}</span>
                                </div>
                            </div>
                        )}

                        {/* Messages Area */}
                        <div className="bg-white shadow-lg" style={{ height: '500px', overflowY: 'auto' }}>
                            <div className="p-6 space-y-4">
                                {messages.length === 0 ? (
                                    <div className="text-center py-20">
                                        <div className="text-6xl mb-4">‚ö°</div>
                                        <h2 className="text-2xl font-semibold text-gray-700 mb-2">Welcome to Groq Agentic AI</h2>
                                        <p className="text-gray-500 max-w-md mx-auto">
                                            Lightning-fast AI agent powered by Groq's LPU technology. I can autonomously use tools like web search, data analysis, and code assistance to help you.
                                        </p>
                                        {!apiKey && (
                                            <div className="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md mx-auto">
                                                <p className="text-sm text-yellow-800">
                                                    üëÜ Please enter your Groq API key above to get started
                                                </p>
                                            </div>
                                        )}
                                        <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-3 max-w-3xl mx-auto">
                                            <button
                                                onClick={() => setInput("What are the latest developments in AI?")}
                                                className="p-4 bg-blue-50 hover:bg-blue-100 rounded-lg text-left transition-colors"
                                                disabled={!apiKey}
                                            >
                                                <div className="font-medium text-gray-800">üîç Search</div>
                                                <div className="text-sm text-gray-600">Latest AI news</div>
                                            </button>
                                            <button
                                                onClick={() => setInput("Compare PySpark vs Pandas")}
                                                className="p-4 bg-purple-50 hover:bg-purple-100 rounded-lg text-left transition-colors"
                                                disabled={!apiKey}
                                            >
                                                <div className="font-medium text-gray-800">üìä Analysis</div>
                                                <div className="text-sm text-gray-600">Compare tools</div>
                                            </button>
                                            <button
                                                onClick={() => setInput("Tell me about Microsoft Fabric")}
                                                className="p-4 bg-green-50 hover:bg-green-100 rounded-lg text-left transition-colors"
                                                disabled={!apiKey}
                                            >
                                                <div className="font-medium text-gray-800">üí¨ Chat</div>
                                                <div className="text-sm text-gray-600">General questions</div>
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    messages.map((msg, idx) => (
                                        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`max-w-3xl ${
                                                msg.role === 'user' 
                                                    ? 'bg-blue-500 text-white rounded-2xl rounded-tr-sm' 
                                                    : msg.type === 'tool'
                                                    ? 'bg-amber-50 text-amber-800 rounded-lg border border-amber-200'
                                                    : msg.type === 'error'
                                                    ? 'bg-red-50 text-red-800 rounded-lg border border-red-200'
                                                    : 'bg-gray-50 text-gray-800 rounded-2xl rounded-tl-sm border border-gray-200'
                                            } px-5 py-3 shadow-sm`}>
                                                {msg.role === 'assistant' && msg.type === 'text' ? (
                                                    <FormattedMessage content={msg.content} />
                                                ) : (
                                                    <div className="whitespace-pre-wrap">{msg.content}</div>
                                                )}
                                                <div className={`text-xs mt-2 ${
                                                    msg.role === 'user' ? 'text-blue-100' : 'text-gray-500'
                                                }`}>
                                                    {msg.timestamp.toLocaleTimeString()}
                                                </div>
                                            </div>
                                        </div>
                                    ))
                                )}
                                <div ref={messagesEndRef} />
                                
                                {/* Typing Indicator */}
                                {isProcessing && (
                                    <div className="flex justify-start">
                                        <div className="bg-gray-50 text-gray-800 rounded-2xl rounded-tl-sm border border-gray-200 px-5 py-3 shadow-sm">
                                            <div className="flex items-center space-x-2">
                                                <div className="flex space-x-1">
                                                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '0ms'}}></div>
                                                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '150ms'}}></div>
                                                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay: '300ms'}}></div>
                                                </div>
                                                <span className="text-sm text-gray-500">Agent is thinking...</span>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Input Area */}
                        <div className="bg-white rounded-b-2xl shadow-lg p-6 border-t border-gray-200">
                            <form onSubmit={handleSubmit} className="flex space-x-3">
                                <input
                                    type="text"
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    placeholder="Ask the agent anything..."
                                    disabled={isProcessing}
                                    className="flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"
                                />
                                <button
                                    type="submit"
                                    disabled={isProcessing || !input.trim()}
                                    className="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg"
                                >
                                    {isProcessing ? (
                                        <div className="flex items-center space-x-2">
                                            <div className="animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"></div>
                                            <span>Processing...</span>
                                        </div>
                                    ) : (
                                        'Send'
                                    )}
                                </button>
                            </form>
                            <div className="mt-3 text-xs text-gray-500 text-center space-y-1">
                                <div>Powered by Groq's LPU ‚Ä¢ Tools: {useTools ? '‚úÖ Enabled (search_web, analyze_data)' : '‚ùå Disabled (direct responses only)'}</div>
                                <div className="pt-2 border-t border-gray-200 mt-2">
                                    Created by <span className="font-medium text-gray-700">Sazzad</span> ‚Ä¢ 
                                    <a href="mailto:your.email@example.com" className="text-blue-600 hover:text-blue-700 ml-1">
                                        your.email@example.com
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        {/* How to Use Guide Modal */}
                        {showGuide && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                                <div className="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                                    {/* Guide Header */}
                                    <div className="sticky top-0 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-t-2xl">
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center space-x-3">
                                                <span className="text-4xl">üìñ</span>
                                                <div>
                                                    <h2 className="text-2xl font-bold">How to Use Guide</h2>
                                                    <p className="text-blue-100 text-sm">Get started in 3 easy steps</p>
                                                </div>
                                            </div>
                                            <button
                                                onClick={() => setShowGuide(false)}
                                                className="text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors"
                                            >
                                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    {/* Guide Content */}
                                    <div className="p-6 space-y-6">
                                        {/* Step 1 */}
                                        <div className="bg-blue-50 rounded-xl p-5 border-l-4 border-blue-500">
                                            <div className="flex items-start space-x-3">
                                                <div className="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">1</div>
                                                <div className="flex-1">
                                                    <h3 className="text-lg font-bold text-gray-800 mb-2">Get Your Groq API Key</h3>
                                                    <ol className="space-y-2 text-sm text-gray-700">
                                                        <li>‚Ä¢ Visit <a href="https://console.groq.com/keys" target="_blank" className="text-blue-600 underline">console.groq.com/keys</a></li>
                                                        <li>‚Ä¢ Sign up for a free account (if you don't have one)</li>
                                                        <li>‚Ä¢ Click "Create API Key"</li>
                                                        <li>‚Ä¢ Copy your API key (starts with "gsk_...")</li>
                                                    </ol>
                                                    <div className="mt-3 bg-blue-100 p-3 rounded-lg text-xs text-blue-800">
                                                        üí° <strong>Tip:</strong> Groq offers free tier with generous limits - perfect for testing!
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Step 2 */}
                                        <div className="bg-purple-50 rounded-xl p-5 border-l-4 border-purple-500">
                                            <div className="flex items-start space-x-3">
                                                <div className="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">2</div>
                                                <div className="flex-1">
                                                    <h3 className="text-lg font-bold text-gray-800 mb-2">Configure Settings</h3>
                                                    <ol className="space-y-2 text-sm text-gray-700">
                                                        <li>‚Ä¢ Click the <strong>"Settings"</strong> button in the top-right</li>
                                                        <li>‚Ä¢ Paste your API key in the "Groq API Key" field</li>
                                                        <li>‚Ä¢ Select your preferred model:
                                                            <ul className="ml-6 mt-1 space-y-1">
                                                                <li>‚ó¶ <strong>Llama 3.3 70B</strong> - Most capable (recommended)</li>
                                                                <li>‚ó¶ <strong>Llama 3.1 8B</strong> - Fastest responses</li>
                                                                <li>‚ó¶ <strong>Mixtral 8x7B</strong> - Balanced performance</li>
                                                                <li>‚ó¶ <strong>Gemma 2 9B</strong> - Google's model</li>
                                                            </ul>
                                                        </li>
                                                        <li>‚Ä¢ Keep "Enable Tool Calling" OFF for now (experimental feature)</li>
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Step 3 */}
                                        <div className="bg-green-50 rounded-xl p-5 border-l-4 border-green-500">
                                            <div className="flex items-start space-x-3">
                                                <div className="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0">3</div>
                                                <div className="flex-1">
                                                    <h3 className="text-lg font-bold text-gray-800 mb-2">Start Chatting!</h3>
                                                    <p className="text-sm text-gray-700 mb-3">Type your questions and get AI-powered responses with beautiful markdown formatting.</p>
                                                    <div className="bg-white p-3 rounded-lg border border-green-200">
                                                        <p className="text-xs font-semibold text-gray-600 mb-2">Try these example prompts:</p>
                                                        <ul className="space-y-1 text-xs text-gray-700">
                                                            <li>‚Ä¢ "What is Microsoft Fabric and how does it work?"</li>
                                                            <li>‚Ä¢ "Compare PySpark vs Pandas for big data processing"</li>
                                                            <li>‚Ä¢ "Explain AI agents in simple terms"</li>
                                                            <li>‚Ä¢ "Write a Python function to read CSV files"</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Features Section */}
                                        <div className="bg-gray-50 rounded-xl p-5">
                                            <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center">
                                                <span className="mr-2">‚ú®</span> Key Features
                                            </h3>
                                            <div className="grid md:grid-cols-2 gap-3">
                                                <div className="bg-white p-3 rounded-lg border border-gray-200">
                                                    <div className="font-semibold text-gray-800 text-sm mb-1">‚ö° Ultra-Fast Responses</div>
                                                    <div className="text-xs text-gray-600">Powered by Groq's LPU technology</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg border border-gray-200">
                                                    <div className="font-semibold text-gray-800 text-sm mb-1">üìù Markdown Formatting</div>
                                                    <div className="text-xs text-gray-600">Beautiful headers, lists, and code blocks</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg border border-gray-200">
                                                    <div className="font-semibold text-gray-800 text-sm mb-1">üîß Tool Calling (Beta)</div>
                                                    <div className="text-xs text-gray-600">Agent can use search and analysis tools</div>
                                                </div>
                                                <div className="bg-white p-3 rounded-lg border border-gray-200">
                                                    <div className="font-semibold text-gray-800 text-sm mb-1">üé® Clean Interface</div>
                                                    <div className="text-xs text-gray-600">Modern, responsive design</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Tips Section */}
                                        <div className="bg-amber-50 rounded-xl p-5 border border-amber-200">
                                            <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center">
                                                <span className="mr-2">üí°</span> Pro Tips
                                            </h3>
                                            <ul className="space-y-2 text-sm text-gray-700">
                                                <li>‚Ä¢ <strong>Security:</strong> Your API key is stored locally in your browser only</li>
                                                <li>‚Ä¢ <strong>Formatting:</strong> Responses support markdown - headings, lists, code blocks, etc.</li>
                                                <li>‚Ä¢ <strong>Models:</strong> Start with Llama 3.3 70B for best results</li>
                                                <li>‚Ä¢ <strong>Tools:</strong> Keep tool calling disabled for stable performance</li>
                                                <li>‚Ä¢ <strong>Clear Chat:</strong> Use the "Clear Chat" button to start fresh conversations</li>
                                            </ul>
                                        </div>
                                        
                                        {/* Troubleshooting */}
                                        <div className="bg-red-50 rounded-xl p-5 border border-red-200">
                                            <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center">
                                                <span className="mr-2">üîß</span> Troubleshooting
                                            </h3>
                                            <ul className="space-y-2 text-sm text-gray-700">
                                                <li>‚Ä¢ <strong>"Failed to call a function":</strong> Disable tool calling in settings</li>
                                                <li>‚Ä¢ <strong>"Invalid API key":</strong> Check your key at console.groq.com</li>
                                                <li>‚Ä¢ <strong>Slow responses:</strong> Try Llama 3.1 8B model</li>
                                                <li>‚Ä¢ <strong>Rate limits:</strong> Groq free tier has limits - wait a moment and try again</li>
                                            </ul>
                                        </div>
                                        
                                        {/* Footer */}
                                        <div className="text-center pt-4 border-t border-gray-200">
                                            <button
                                                onClick={() => setShowGuide(false)}
                                                className="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg"
                                            >
                                                Got it! Let's Start
                                            </button>
                                            <p className="text-xs text-gray-500 mt-3">
                                                You can always access this guide by clicking the "üìñ Guide" button
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<AgenticAIApp />, document.getElementById('root'));
    </script>
</body>
</html>
